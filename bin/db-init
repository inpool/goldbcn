#! /usr/bin/env python2
#-*- coding: utf-8 -*-


def init_db(db):
    script = create_script()
    db.executescript(script)
    db.commit()

def create_script():
    from itertools import product
    from string import lowercase
    result = (table_sql(c1+c2) for c1, c2 in product(lowercase, lowercase))
    return '\n'.join(result)

def table_sql(suffix):
    return '''CREATE TABLE IF NOT EXISTS word_%s (
        word VARCHAR PRIMARY KEY,
        keyword VARCHAR,
        sound VARCHAR,
        mean VARCHAR);''' % suffix

if __name__ == '__main__':
    import sys, os
    
    p = os.path.dirname(os.path.dirname(os.path.realpath(__file__)))
    sys.path.insert(0, p)
    
    import goldbcn
    
    db_dir = os.path.dirname(goldbcn.DB_PATH)
    if not os.path.exists(db_dir):
        os.makedirs(db_dir)
    elif not os.path.isdir(db_dir):
        print >> sys.stderr, "The database file's directory name is a file"
        sys.exit(1)
    db = goldbcn.get_db()
    init_db(db)
